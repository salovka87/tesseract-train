name: Codex Bootstrap
on:
  push:
    branches: [ main, master ]
  workflow_dispatch:
permissions:
  contents: write
  pull-requests: write
jobs:
  bootstrap:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Ensure base layout
        run: |
          mkdir -p data scripts dataset/real/train dataset/real/val .github/workflows tessdata_best
          if [ ! -f README.md ]; then
            echo "# oriogo - Tesseract invoice OCR" > README.md
            echo "" >> README.md
            echo "Bootstrap structure for Code/Codex tasks." >> README.md
          fi
          if [ ! -f WORKFLOWS_README.md ]; then
            echo "Workflows overview placeholder." > WORKFLOWS_README.md
          fi
      - name: Commit bootstrap (if needed)
        run: |
          if [ -n "$(git status --porcelain)" ]; then
            git config user.name "github-actions[bot]"
            git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
            git add .
            git commit -m "Bootstrap repo for Codex"
            git push
          else
            echo "Nothing to commit."
          fi
